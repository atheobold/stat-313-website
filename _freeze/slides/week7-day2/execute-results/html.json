{
  "hash": "c33efa1494807cccf1b5fc3676bf6e29",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Confidence Intervals -- Real Life Sampling Distributions\"\nformat: \n  revealjs:\n    theme: style.scss\neditor: visual\n---\n\n::: {.cell}\n\n:::\n\n\n## Course Updates\n\n-   Lab 4 revisions are due tonight (May 15)\n-   Midterm Projects will be graded by Sunday (May 19)\n-   Lab 6 revisions will be due next Wednesday (May 22)\n\n::: callout-caution\n# Don't forget reflections!\n\nIf your reflections are not present by the deadline for revisions, your revisions **are not** eligible to be regraded. Please don't forget your reflections!\n:::\n\n# What if I only have one sample?\n\n## \n\n::: {style=\"font-size: 2em; color: #000000;\"}\nApproximate the variability you'd expect to see in other samples!\n:::\n\n. . .\n\n<center>\n\n::: {style=\"font-size: 3em; color: #0F4C81;\"}\n**Bootstrapping!**\n:::\n\n## \n\n::: {style=\"font-size: 2em; color: #000000;\"}\nA Bootstrap Resample\n:::\n\n. . .\n\n-   Assumes the original sample is \"representative\" of observations in the population.\n\n. . .\n\n-   Uses the original sample to generate new samples that might have occurred with additional sampling.\n\n</br>\n\n. . .\n\n::: {style=\"font-size: 1em; color: #0F4C81;\"}\nWe can use the statistics from these bootstrap resamples to approximate the true sampling distribution!\n:::\n\n# Why do we want a sampling distribution?\n\n## \n\n::: {style=\"font-size: 2em; color: #000000;\"}\nEstimating a population parameter\n:::\n\n. . .\n\n-   We are interested in knowing how a statistic varies from sample to sample.\n\n. . .\n\n-   Knowing a statistic's behavior helps us make better / more informed decisions!\n\n. . .\n\n-   This helps us estimate what values are more or less likely for the population parameter to have.\n\n# Confidence Intervals\n\n. . .\n\n> Capture a range of plausible values for the population parameter.\n\n. . .\n\n</br>\n\n> Are more likely to capture the population parameter than a *point estimate*.\n\n## \n\n::: {style=\"font-size: 2em; color: #000000;\"}\nHow do I get this plausible range of values?\n:::\n\n. . .\n\n<center>\n\n::: {style=\"font-size: 1.25em; color: #0F4C81;\"}\nBootstrapping!\n:::\n\n. . .\n\n::: small\n1.  From your original sample, resample with replacement the same number of times as your original sample.\n:::\n\n. . .\n\n<center>\n\n::: {style=\"font-size: 0.75em; color: #0F4C81;\"}\nThis is your bootstrap resample.\n:::\n\n</center>\n\n. . .\n\n::: small\n2.  Repeat this process many, many times.\n:::\n\n. . .\n\n::: small\n3.  Calculate a numerical summary (e.g., mean, median) for each bootstrap resample.\n:::\n\n. . .\n\n<center>\n\n::: {style=\"font-size: 0.75em; color: #0F4C81;\"}\nThese are your bootstrap statistics\n:::\n\n</center>\n\n## \n\n::: {style=\"font-size: 2em; color: #000000;\"}\nBootstrap Distribution\n:::\n\n. . .\n\n> a distribution of the **bootstrap statistics** from every **bootstrap resample**\n\n. . .\n\n</br>\n\nDisplays the variability in the statistic that could have happened with repeated sampling.\n\n. . .\n\n::: {style=\"font-size: 1em; color: #0F4C81;\"}\nApproximates the true sampling distribution!\n:::\n\n# Penguins!\n\n::: columns\n::: {.column width=\"45%\"}\n![](images/adelie_penguin.jpg)\n:::\n\n::: {.column width=\"5%\"}\n:::\n\n::: {.column width=\"45%\"}\n![](images/chinstrap_penguin.jpeg)\n:::\n:::\n\n## Statistic: $\\beta_1$\n\n\n::: {.cell}\n\n:::\n\n\n::: columns\n::: {.column width=\"70%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n![](week7-day2_files/figure-revealjs/scatterplot-1.png){width=960}\n:::\n:::\n\n:::\n\n::: {.column width=\"5%\"}\n:::\n\n::: {.column width=\"25%\"}\nThe relationship between penguin's bill length and body mass for **all** penguins in the Palmer Archipelago\n:::\n:::\n\n## In this sample of 344 penguins...\n\n\n::: {.cell}\n\n:::\n\n\n$$\\widehat{\\text{bill length}} = 26.899 + 0.004 \\times \\text{body mass}$$\n\n. . .\n\n</br>\n\n::: {style=\"font-size: 1.5em;\"}\nWhat slope could have happened in a different sample of penguins?\n:::\n\n## \n\n::: {style=\"font-size: 2em; color: #000000;\"}\nGenerating bootstrap resamples and calculating bootstrap statistics\n:::\n\n. . .\n\n</br>\n\n**Step 1:** `specify()` your response and explanatory variables\n\n. . .\n\n**Step 2:** `generate()` bootstrap resamples\n\n. . .\n\n**Step 3:** `calculate()` the statistic of interest\n\n## \n\n::: {style=\"font-size: 2em; color: #000000;\"}\nStep 1: Specify your variables!\n:::\n\n![](images/specify_scatterplot.jpg)\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|2,3\"}\npenguins %>% \n  specify(response = bill_length_mm, \n          explanatory = body_mass_g)\n```\n:::\n\n\n## \n\n::: {style=\"font-size: 2em; color: #000000;\"}\nStep 2: Generate your resamples!\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|4\"}\npenguins %>% \n  specify(response = bill_length_mm, \n          explanatory = body_mass_g) %>% \n  generate(reps = 500, type = \"bootstrap\")\n```\n:::\n\n\n</br>\n\n. . .\n\n`reps` -- the number of resamples you want to generate\n\n</br>\n\n`\"bootstrap\"` -- the method that should be used to generate the new samples\n\n##  {background-color=\"#B6CADA\"}\n\n::: {style=\"font-size: 3em; color: #000000;\"}\nYour turn!\n:::\n\n. . .\n\n</br>\n\nWhy do we resample *with replacement* when creating a bootstrap distribution?\n\n</br>\n\nWhen we resample with replacement from our original sample what are we assuming about the original sample?\n\n## \n\n::: {style=\"font-size: 2em; color: #000000;\"}\nStep 3: Calculate your statistics!\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|6\"}\npenguins %>% \n  specify(response = bill_length_mm, \n          explanatory = body_mass_g) %>% \n  generate(reps = 1000, \n           type = \"bootstrap\") %>% \n  calculate(stat = \"slope\")\n```\n:::\n\n\n</br>\n\n. . .\n\n`\"slope\"` -- the `stat`istic of interest\n\n##  {background-color=\"#B6CADA\"}\n\n::: {style=\"font-size: 2em; color: #000000;\"}\nThe final product\n:::\n\n::: {style=\"font-size: 0.85em;\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"false\"}\nvisualize(boot1) + \n  labs(title = \"Distribution of 1,000 Bootstrap Resamples\", \n       x = \"Slope Statistic\", \n       y = \"\")\n```\n:::\n\n:::\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](week7-day2_files/figure-revealjs/bootstrap-viz-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n## \n\n::: {style=\"font-size: 2em; color: #000000;\"}\nA plausible range of values for $\\beta_1$\n:::\n\n::: {style=\"font-size: 0.75em;\"}\n\n::: {.cell output-location='slide'}\n\n```{.r .cell-code  code-line-numbers=\"false\"}\nvisualise(boot1) +\n  shade_confidence_interval(endpoints = boot1_CI, \n                            color = \"red\", \n                            fill = \"pink\") +  \n  labs(title = \"Distribution of 1,000 Bootstrap Resamples\", \n       x = \"Slope Statistic\", \n       y = \"\")\n```\n\n::: {.cell-output-display}\n![](week7-day2_files/figure-revealjs/ci-viz-1.png){width=960}\n:::\n:::\n\n:::\n\n## \n\n::: {style=\"font-size: 2em; color: #000000;\"}\nThe 95% confidence interval is...\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"false\"}\nget_confidence_interval(boot1, \n                        level = 0.95, \n                        type = \"percentile\")\n```\n:::\n\n\n</br>\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> Lower Bound </th>\n   <th style=\"text-align:right;\"> Upper Bound </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 0.00352 </td>\n   <td style=\"text-align:right;\"> 0.00448 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n. . .\n\n**What do we hope is captured by this interval?**\n\n## \n\n::: {style=\"font-size: 2em; color: #000000;\"}\nHow do we interpret this interval?\n:::\n\n. . .\n\n::: small\n> \"We are 95% confident the slope of the relationship between bill length and body mass for all penguins in the Palmer Archipelago is between 0.00355 and 0.00453\n:::\n\n. . .\n\n</br>\n\n::: small\n> \"For every 1 gram increase in a penguin's body mass, we are 95% confident the length of the penguin's bill will increase between 0.00355 and 0.00453mm.\n:::\n\n##  {background-color=\"#B6CADA\"}\n\n::: {style=\"font-size: 2em; color: #000000;\"}\nClassic interpretation mistakes\n:::\n\n. . .\n\n</br>\n\n> \"95% of the time the population parameter would fall between 0.00355 and 0.00453.\"\n\n</br>\n\n. . .\n\n> \"We are 95% confident the sample statistic is in our interval.\"\n\n# Scaling to Multiple Linear Regression\n\n## How does the relationship between bill length and body mass change based on a penguin's sex?\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](week7-day2_files/figure-revealjs/unnamed-chunk-4-1.png){width=960}\n:::\n:::\n\n\n## What changes?\n\nThe original sample of 344 penguins were broken down into the following groups (plus 11 `NA` values):\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Sex </th>\n   <th style=\"text-align:right;\"> Sample Size </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> female </td>\n   <td style=\"text-align:right;\"> 165 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> male </td>\n   <td style=\"text-align:right;\"> 168 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n. . .\n\nBefore we resampled with replacement 344 times.\n\n> If we resample with replacement 333 times, are we guaranteed to get 165 female penguins and 168 male penguins in each sample?\n\n## Getting our Observed Statistic\n\n**Step 1: Fitting our Model**\n\n::: {style=\"font-size: 0.75em;\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|2|3\"}\nobserved_fit <- penguins %>%\n  specify(bill_length_mm ~ body_mass_g * sex) %>%\n  fit()\n```\n:::\n\n:::\n\n::: callout-tip\n# Syntax changes\n\nWhen we have [**multiple**]{.underline} explanatory variables, we need to use the \"tilde\" (`~`) syntax to specify our model. We also use the `fit()` function instead of the `calculate()` function.\n:::\n\n## Getting our Observed Statistic\n\n**Step 2: Finding our Statistic**\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> term </th>\n   <th style=\"text-align:right;\"> estimate </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> intercept </td>\n   <td style=\"text-align:right;\"> 25.5713814 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> body_mass_g </td>\n   <td style=\"text-align:right;\"> 0.0042787 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> sexmale </td>\n   <td style=\"text-align:right;\"> 5.5160611 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> body_mass_g:sexmale </td>\n   <td style=\"text-align:right;\"> -0.0010301 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n::: {style=\"font-size: 1.5em; color: #ed8402;\"}\nWhat is our observed statistic for this investigation?\n:::\n\n## Generating Bootstrap Fits\n\n::: {style=\"font-size: 0.75em;\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|3\"}\nbootstrap_fits <- penguins %>%\n  specify(bill_length_mm ~ body_mass_g * sex) %>%\n  generate(reps = 1000, type = \"bootstrap\") %>%\n  fit()\n```\n:::\n\n:::\n\n## Obtaining a Bootstrap Confidence Interval\n\n::: {style=\"font-size: 0.75em;\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|2\"}\nget_confidence_interval(bootstrap_fits,\n                        point_estimate = observed_fit,\n                        level = 0.90, \n                        type = \"percentile\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 Ã— 3\n  term                lower_ci   upper_ci\n  <chr>                  <dbl>      <dbl>\n1 body_mass_g          0.00365  0.00487  \n2 body_mass_g:sexmale -0.00202 -0.0000684\n3 intercept           22.9     28.3      \n4 sexmale              0.995   10.2      \n```\n\n\n:::\n:::\n\n:::\n\n## How do we interpret this interval?\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> Lower Bound </th>\n   <th style=\"text-align:right;\"> Upper Bound </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> -0.0020159 </td>\n   <td style=\"text-align:right;\"> -0.0000684 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n. . .\n\n> We are 90% confident that the for every 10,000 gram increase in a penguin's body mass (\\~25lbs), the length of a **male** penguin's bill is between 0.68 and 20.2mm [shorter]{.underline} than a **female** penguin's bill.\n\n## How do body mass and flipper length influence a penguin's bill length?\n\n. . .\n\n::: {style=\"font-size: 0.75em;\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"false\"}\nobserved_fit <- penguins %>%\n  specify(bill_length_mm ~ body_mass_g + flipper_length_mm) %>%\n  fit()\n\nbootstrap_fits <- penguins %>%\n  specify(bill_length_mm ~ body_mass_g + flipper_length_mm) %>%\n  generate(reps = 1000, type = \"bootstrap\") %>%\n  fit()\n```\n:::\n\n:::\n\n## Visualizing Bootstrap Distributions\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"false\"}\nvisualise(bootstrap_fits)\n```\n\n::: {.cell-output-display}\n![](week7-day2_files/figure-revealjs/unnamed-chunk-12-1.png){width=960}\n:::\n:::\n\n\n## Obtaining and Interpreting Confidence Intervals\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> term </th>\n   <th style=\"text-align:right;\"> Lower Bound </th>\n   <th style=\"text-align:right;\"> Upper Bound </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> body_mass_g </td>\n   <td style=\"text-align:right;\"> -0.0002028 </td>\n   <td style=\"text-align:right;\"> 0.0015676 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> flipper_length_mm </td>\n   <td style=\"text-align:right;\"> 0.1728445 </td>\n   <td style=\"text-align:right;\"> 0.2663523 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> intercept </td>\n   <td style=\"text-align:right;\"> -9.4472566 </td>\n   <td style=\"text-align:right;\"> 3.5454740 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n. . .\n\nHow would you interpret the confidence interval for `flipper_length_mm`? For `body_mass_g`?\n\n## Holding the Other Variable(s) Constant\n\n> Holding body mass constant, we are 95% confident that a 1mm increase in flipper length is associated with between a 0.173 and 0.266mm increase in a penguin's bill length.\n\n. . .\n\n> Holding flipper length constant, we are 95% confident that a 100 gram increase in body mass is associated with between a 0.203mm decrease and a 0.157mm increase in a penguin's bill length.\n\n# Lab 7\n\n## Water Temperature and Latitude\n\n::: columns\n::: {.column width=\"50%\"}\n::: small\n> When including both water temperature and latitude in a multiple linear regression, we get coefficients that contradict the relationships seen in the visualizations. This only happens if the explanatory variables are highly correlated with each other.\n:::\n:::\n\n::: {.column width=\"5%\"}\n:::\n\n::: {.column width=\"45%\"}\n![](images/maine-coastline.webp)\n:::\n:::\n\n. . .\n\nWhat is the relationship between water temperature and latitude for salt marshes along the Atlantic coast?\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}